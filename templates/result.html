<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results for {{ domain }} - LLM Search Performance Tracker</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9B4WW61DS4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-9B4WW61DS4');
    </script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîç</text></svg>">
</head>
<body>
    <h1>Results for {{ domain }}</h1>
    
    <h2>Website Information</h2>
    <p><strong>Title:</strong> {{ info.title }}</p>
    <p><strong>Description:</strong> {{ info.description }}</p>
    
    <h2>Relevant Searches</h2>
    <ol>
    {% for prompt in prompts %}
        <li><a href="#result-{{ loop.index }}">{{ prompt.split('.', 1)[-1].strip().strip('"*') }}</a></li>
    {% endfor %}
    </ol>
    
    <h2>Visibility and Competitors</h2>
    <table>
        <thead>
            <tr>
                <th>Prompt</th>
                <th>Answer</th>
                <th>Top Competitors</th>
                <th>Are you visible in LLM results?</th>
            </tr>
        </thead>
        <tbody>
        {% for row in table %}
            <tr id="result-{{ loop.index }}">
                <td class="truncate">{{ row.prompt.split('.', 1)[-1].strip().strip('"*') }}</td>
                <td class="truncate">{{ row.answer }}</td>
                <td>
                    {% if row.competitors != 'None mentioned' %}
                        <ol>
                            {% for competitor in row.competitors.split(', ') %}
                                <li>{{ competitor }}</li>
                            {% endfor %}
                        </ol>
                    {% else %}
                        {{ row.competitors }}
                    {% endif %}
                </td>
                <td class="visibility-status {% if 'Yes' in row.visible %}visible{% else %}not-visible{% endif %}">
                    <span class="visibility-icon">
                        {% if 'Yes' in row.visible %}
                            &#10004;
                        {% else %}
                            &#10008;
                        {% endif %}
                    </span>
                    {{ row.visible }}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    
    {% if searches_left > 0 %}
        <p class="cta-text">You have {{ searches_left }} free searches left. Want to analyze more domains?</p>
        <div class="cta-container">
            <a href="{{ url_for('index') }}" class="cta-button">Analyze Another Domain</a>
        </div>
    {% else %}
        <p class="cta-text">You've used all your free searches. Want to analyze more domains and get deeper insights?</p>
        <div class="cta-container">
            <a href="https://mv71z3xpmnl.typeform.com/to/bmN8bM2y" target="_blank" class="cta-button waiting-list-button">Join Waiting List for Premium Access</a>
        </div>
    {% endif %}
</body>
</html>
